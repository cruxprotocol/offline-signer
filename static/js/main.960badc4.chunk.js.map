{"version":3,"sources":["copy-icon.png","components/Metadata/Metadata.module.scss","App.module.scss","components/Signer/Signer.jsx","components/Metadata/Metadata.jsx","App.jsx","index.js"],"names":["module","exports","CoinKey","require","Signer","props","handlePkInput","event","setState","privateKey","target","value","console","log","key","String","validKey","undefined","length","slice","fromWif","toString","error","privateKeyHex","handleMessageInput","message","handleSign","state","JSON","parse","err","signature","TokenSigner","sign","window","scroll","top","left","behavior","setTimeout","handleCopy","str","el","document","createElement","body","appendChild","select","execCommand","removeChild","isCopied","querySelectorAll","forEach","input","MDCTextField","text","MDCSelectHelperText","button","MDCRipple","className","autoComplete","this","id","onChange","htmlFor","rows","cols","type","disabled","onClick","src","CopyIcon","alt","width","role","aria-label","Component","Metadata","styles","metadata","question","answer","href","rel","App","direction","bannerColor","ariaLabel","AppContainer","Heading","SubHeading","Footer","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.960badc4.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAACVElEQVR4nO3cTU7VUByG8cePXCbGFTA1DJBd6Ep0PUSN6B6McQGKbkLdgHMS78fwEhyUGENCW9KT8x7b55ecEYXe/h8oSnMPSJIkSdKwE+A18APYAVczWxvgE3BUamClHADvgEvyQ6qxLoDDIpMr4AD4Rn4otdeHEsMr4T35YSTWusTwpjphObedm+t3gfn1uj/imBcjj5uj8/QLAPhJ/jsxsS6AJwXmN9mG/DBqrjXwkUrDvzfimKsCX0O3WOq9vRkGCDNAmAHCDBBmgDADhCUCzO15wu76Wl4BTwvO6a+hFzDWEp4nXAJnwOoOcxlUIsDSnid8pWCEEgGW+Dzh7cjZDJoaYKnPE/bA8dBwavwSflnpPK15QPcspVeNwTyrcI5WPR86oMafo7fAoxHnmaMt8LjvgBoBpn5+6yZd3xLvzU0xQJgBwgwQZoAwA4QZIMwAYQYIM0CYAcIMEGaAMAOEGSDMAGEGCDNAmAHCDBBmgDADhBkgzABhBggzQJgBwgwQZoAwA4QZIMwAYQYIM0CYAcLGBNj2fKyJjU3/Z2MC9O2d2cS+mnN3RLeH5s13go/dV3PqO+1bV+X6Duk2sl5z9301DdCjxnt0fZ9wD/8VFGaAMAOEGSDMAGEGCDNA2MMK59jRv2HTHP4zdpvN0AE1fgJ+VThHqwavvUaALxXO0arP6RcA3Xa+e/LbSDa5bWUtZ+QHUnu9KTK5QlZ02/mmh1JrnVN4/+gSVnTb+c75drSn+85vbvj/OgZOge90jzvTQ5u6ttfXckpD93xJkiRJ7foDm3pRQnxnrm8AAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"metadata\":\"Metadata_metadata__1YXqX\",\"question\":\"Metadata_question__183g4\",\"answer\":\"Metadata_answer__x4O8q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AppContainer\":\"App_AppContainer__1QrdK\",\"Heading\":\"App_Heading__3jrfb\",\"SubHeading\":\"App_SubHeading__2GndU\",\"Footer\":\"App_Footer__eC581\"};","import React, { Component } from \"react\";\nimport \"./Signer.scss\";\nimport { MDCTextField } from \"@material/textfield\";\nimport { MDCSelectHelperText } from \"@material/select/helper-text\";\nimport { MDCRipple } from \"@material/ripple\";\nimport { TokenSigner } from \"jsontokens\";\nimport CopyIcon from \"../../copy-icon.png\";\nvar CoinKey = require('coinkey');\n\nclass Signer extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            privateKey: \"\",\n            message: \"\",\n            signature: \"\",\n            error: \"\",\n            isCopied: false,\n            privateKeyHex: \"\"\n        };\n    }\n    componentDidMount() {\n        const inputs = document.querySelectorAll(\".mdc-text-field\");\n        inputs.forEach(input => {\n            new MDCTextField(input);\n        });\n\n        const helperText = document.querySelectorAll(\".mdc-select-helper-text\");\n        helperText.forEach(text => {\n            new MDCSelectHelperText(text);\n        });\n\n        const buttons = document.querySelectorAll(\".mdc-button\");\n        buttons.forEach(button => {\n            new MDCRipple(button);\n        });\n    }\n\n    handlePkInput = event => {\n        this.setState({ privateKey: event.target.value });\n        console.log(\"handlePkInput\")\n        let key = String(event.target.value);\n        let validKey = undefined;\n\n        if (key.length === 64){\n            validKey = key;\n        }\n        else if (key.length === 66){\n            validKey = key.slice(0,-2);\n        }\n        else if (key.length === 52){\n            let hexToWif = CoinKey.fromWif(key)\n            validKey = hexToWif.privateKey.toString('hex')\n        } else {\n            this.setState({error: 'Invalid Private Key'})\n        }\n\n        if(validKey) {\n            this.setState({error: ''});\n            this.setState({ privateKeyHex: validKey });\n        }\n    };\n\n    handleMessageInput = event => {\n        this.setState({ message: event.target.value });\n    };\n\n    handleSign = () => {\n        if (this.state.privateKey && this.state.message) {\n            this.setState({\n                error: \"\"\n            });\n            let message = \"\";\n            try {\n                message = JSON.parse(this.state.message);\n            } catch (err) {\n                message = this.state.message;\n            }\n            let signature = new TokenSigner(\n                \"ES256K\",\n                this.state.privateKeyHex\n            ).sign(message);\n            this.setState({ signature: signature }, () => {\n                window.scroll({\n                    top: 100,\n                    left: 0,\n                    behavior: \"smooth\"\n                });\n            });\n        } else {\n            this.setState({\n                error: \"Private Key and/or Message field(s) cannot be empty\"\n            });\n            setTimeout(() => {\n                this.setState({\n                    error: \"\"\n                });\n            }, 3500);\n        }\n    };\n\n    handleCopy = str => {\n        const el = document.createElement(\"textarea\");\n        el.value = str;\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(el);\n        this.setState({ isCopied: true }, () => {\n            setTimeout(() => {\n                this.setState({ isCopied: false });\n            }, 2000);\n        });\n    };\n\n    render() {\n        return (\n            <form className=\"signer\" autoComplete=\"off\">\n                {this.state.error && (\n                    <div className=\"signer__error-block\">\n                        {this.state.error}\n                    </div>\n                )}\n                <div className=\"signer__input\">\n                    <div className=\"mdc-text-field mdc-text-field--outlined\">\n                        <input\n                            className=\"mdc-text-field__input\"\n                            id=\"text-field-hero-input\"\n                            onChange={this.handlePkInput}\n                            value={this.state.privateKey}\n                        />\n                        <div className=\"mdc-notched-outline\">\n                            <div className=\"mdc-notched-outline__leading\"></div>\n                            <div className=\"mdc-notched-outline__notch\">\n                                <label\n                                    htmlFor=\"text-field-hero-input\"\n                                    className=\"mdc-floating-label\"\n                                >\n                                    Your Private Key\n                                </label>\n                            </div>\n                            <div className=\"mdc-notched-outline__trailing\"></div>\n                        </div>\n                    </div>\n                    <div className=\"mdc-select-helper-text mdc-select-helper-text--persistent\">\n                        Both WIF or Hex format Private Keys are supported\n                    </div>\n                </div>\n\n                <div className=\"signer__input\">\n                    <div className=\"mdc-text-field mdc-text-field--textarea\">\n                        <textarea\n                            id=\"message\"\n                            className=\"mdc-text-field__input\"\n                            rows=\"8\"\n                            cols=\"40\"\n                            onChange={this.handleMessageInput}\n                            value={this.state.message}\n                        ></textarea>\n                        <div className=\"mdc-notched-outline\">\n                            <div className=\"mdc-notched-outline__leading\"></div>\n                            <div className=\"mdc-notched-outline__notch\">\n                                <label\n                                    htmlFor=\"message\"\n                                    className=\"mdc-floating-label\"\n                                >\n                                    Message To Sign\n                                </label>\n                            </div>\n                            <div className=\"mdc-notched-outline__trailing\"></div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"signer__footer\">\n                    <button\n                        className=\"mdc-button mdc-button--raised\"\n                        type=\"button\" disabled={this.state.error}\n                        onClick={this.handleSign}\n                    >\n                        Sign Message\n                    </button>\n                </div>\n                {this.state.signature && (\n                    <div className=\"signature\">\n                        <div>{this.state.signature}</div>\n                        <div>\n                            {!this.state.isCopied && (\n                                <img\n                                    src={CopyIcon}\n                                    alt=\"CopyIcon\"\n                                    width=\"20\"\n                                    className=\"copy-icon\"\n                                    onClick={() =>\n                                        this.handleCopy(this.state.signature)\n                                    }\n                                />\n                            )}\n                            {this.state.isCopied && (\n                                <span className=\"copied-message\">\n                                    Copied{\" \"}\n                                    <span role=\"img\" aria-label=\"copied\">\n                                        👍🏾\n                                    </span>\n                                </span>\n                            )}\n                        </div>\n                    </div>\n                )}\n            </form>\n        );\n    }\n}\n\nexport default Signer;\n","import React from \"react\";\nimport styles from \"./Metadata.module.scss\";\nfunction Metadata() {\n    return (\n        <div className={styles.metadata}>\n            <div className={styles.question}>What is Message Signer ?</div>\n            <div className={styles.answer}>\n                Message Signer is a simple UI to safely sign JSON Web Tokens\n                (JWTs) with a Private Key\n            </div>\n            <div className={styles.question}>\n                What algorithm the Signer uses to sign the data ?\n            </div>\n            <div className={styles.answer}>\n                It uses ES256K signature scheme (which uses the secp256k\n                elliptic curve) to sign he data.\n            </div>\n            <div className={styles.question}>\n                How is Message Signer secure? Can I run Message Signer Offline?\n            </div>\n            <div className={styles.answer}>\n                The signer code is open source and is run on Github itself. Feel\n                free to audit the code and provide any feedback in the{\" \"}\n                <a\n                    href=\"https://github.com/cruxprotocol/offline-signer/issues\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                >\n                    Issues section\n                </a>\n                .\n            </div>\n            <div className={styles.answer}>\n                The signing application is intended to run offline once loaded.\n                You can disconnect from the internet after loading the page, and\n                terminate the Browser process before switching the internet back\n                on.\n            </div>\n        </div>\n    );\n}\nexport default Metadata;\n","import React from \"react\";\nimport styles from \"./App.module.scss\";\nimport Signer from \"./components/Signer/Signer\";\nimport Metadata from \"./components/Metadata/Metadata\";\nimport GithubCorner from \"react-github-corner\";\n\nfunction App() {\n    return (\n        <div className={styles.App}>\n            <GithubCorner\n                href=\"https://github.com/cruxprotocol/offline-signer\"\n                direction=\"right\"\n                bannerColor=\"#5433ff\"\n                ariaLabel=\"Crux Protocol Offline Signer\"\n                target=\"_blank\"\n            />\n            <div className={styles.AppContainer}>\n                <div className={styles.Heading}>Message Signer</div>\n                <div className={styles.SubHeading}>\n                    Safely sign JSON Web Tokens with your Private Key\n                </div>\n                <Signer />\n                <Metadata />\n            </div>\n            <div className={styles.Footer}>\n                Copyright © 2019 <strong>CruxPay</strong>®\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}